<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finger Counting Fun</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { box-sizing: border-box; background-color: #FEF3C7; }
    * { font-family: 'Fredoka', 'Nunito', sans-serif; }
    @keyframes bounce-in {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.08); }
      70% { transform: scale(0.92); }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes wiggle {
      0%, 100% { transform: rotate(-4deg); }
      25% { transform: rotate(4deg); }
      50% { transform: rotate(-4deg); }
      75% { transform: rotate(4deg); }
    }
    @keyframes pop {
      0% { transform: scale(1); }
      40% { transform: scale(1.15); }
      60% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      25% { transform: translateY(-8px) rotate(-2deg); }
      50% { transform: translateY(-12px) rotate(0deg); }
      75% { transform: translateY(-8px) rotate(2deg); }
    }
    @keyframes confetti-fall {
      0% { transform: translateY(-150%) rotate(0deg) scale(1); opacity: 1; }
      100% { transform: translateY(120vh) rotate(720deg) scale(0.8); opacity: 0; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
    .bounce-in { animation: bounce-in 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
    .pop { animation: pop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
    .float { animation: float 4s ease-in-out infinite; }
    .shake { animation: shake 0.6s ease-in-out; }
    .confetti { position: absolute; animation: confetti-fall 2s ease-out forwards; z-index: 100; }
    .btn-option { transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    .btn-option:hover:not(:disabled) { transform: translateY(-5px); filter: brightness(1.05); }
    .btn-option:active:not(:disabled) { transform: scale(0.95); }
    .timer-bar { transition: width 1s linear; }
  </style>
 </head>
 <body class="h-full">
  <div id="app" class="h-full overflow-auto">
   <div class="min-h-full p-4 md:p-6">
    <div class="hidden lg:flex h-full items-center justify-center gap-8">
     <div class="flex flex-col items-center gap-6 w-1/3 max-w-md">
      <div class="text-center">
       <h1 id="game-title-desktop" class="text-4xl xl:text-5xl font-extrabold mb-3 drop-shadow-lg text-amber-900">üñêÔ∏è Finger Counting Fun! üñêÔ∏è</h1>
       <p id="subtitle-desktop" class="text-xl xl:text-2xl font-semibold text-amber-800">How many fingers do you see?</p>
      </div>
      <div class="w-full">
       <div class="flex justify-between items-center mb-3">
        <div class="score-badge bg-white flex items-center gap-2 px-4 py-3 rounded-full shadow-lg border-4 border-orange-400">
         <span class="text-2xl">‚≠ê</span>
         <div class="flex flex-col"><span class="text-xs font-semibold opacity-75">Score</span> <span id="score-desktop" class="text-2xl font-extrabold">0</span></div>
        </div>
        <div class="score-badge bg-white flex items-center gap-2 px-4 py-3 rounded-full shadow-lg border-4 border-orange-400">
         <span class="text-2xl">üî•</span>
         <div class="flex flex-col"><span class="text-xs font-semibold opacity-75">Streak</span> <span id="streak-desktop" class="text-2xl font-extrabold">0</span></div>
        </div>
       </div>
       <div class="w-full h-5 bg-white rounded-full overflow-hidden border-2 border-orange-400" id="timer-container-desktop">
        <div id="timer-bar-desktop" class="timer-bar h-full bg-green-500" style="width: 100%"></div>
       </div>
       <p class="text-center font-bold mt-2 text-amber-900">‚è±Ô∏è <span id="time-remaining-desktop">15</span>s</p>
      </div>
      <div id="feedback-desktop" class="h-24 flex items-center justify-center w-full"></div>
      <div id="options-container-desktop" class="grid grid-cols-2 gap-4 w-full"></div>
      <button id="next-btn-desktop" class="px-8 py-4 bg-orange-500 text-white rounded-full text-xl font-extrabold shadow-xl border-4 border-amber-900 hidden"> Next Question ‚û°Ô∏è </button>
     </div>
     <div class="flex items-center justify-center w-2/3">
      <div id="hands-container-desktop" class="bg-white rounded-3xl p-12 shadow-2xl border-4 border-dashed border-orange-400 float">
       <div id="hands-display-desktop" class="flex justify-center items-center gap-20 min-h-[250px]"></div>
      </div>
     </div>
    </div>

    <div class="flex flex-col items-center lg:hidden">
     <div class="text-center mb-4">
      <h1 id="game-title" class="text-3xl font-extrabold text-amber-900">üñêÔ∏è Finger Counting!</h1>
      <p id="subtitle" class="text-lg font-semibold text-amber-800">How many fingers?</p>
     </div>
     <div class="w-full max-w-sm mb-5">
      <div class="flex justify-between mb-3">
       <div class="score-badge bg-white px-4 py-2 rounded-full border-2 border-orange-400 text-center">
        <span class="text-sm block">Score</span><span id="score" class="font-bold">0</span>
       </div>
       <div class="score-badge bg-white px-4 py-2 rounded-full border-2 border-orange-400 text-center">
        <span class="text-sm block">Streak</span><span id="streak" class="font-bold">0</span>
       </div>
      </div>
      <div class="w-full h-4 bg-white rounded-full border-2 border-orange-400 overflow-hidden">
       <div id="timer-bar" class="timer-bar h-full bg-green-500" style="width: 100%"></div>
      </div>
     </div>
     <div id="hands-container" class="bg-white rounded-2xl p-6 mb-6 shadow-xl border-4 border-dashed border-orange-400">
      <div id="hands-display" class="flex justify-center items-center gap-10 min-h-[180px]"></div>
     </div>
     <div id="feedback" class="h-16 mb-4"></div>
     <div id="options-container" class="grid grid-cols-2 gap-3 w-full max-w-sm mb-6"></div>
     <button id="next-btn" class="px-8 py-4 bg-orange-500 text-white rounded-full font-bold hidden">Next Question ‚û°Ô∏è</button>
    </div>
   </div>
   <div id="confetti-container" class="fixed inset-0 pointer-events-none overflow-hidden"></div>
  </div>

  <script>
    const defaultConfig = {
      game_title: "üñêÔ∏è Finger Counting Fun! üñêÔ∏è",
      correct_message: "Great job!",
      wrong_message: "Try again!",
      background_color: "#FEF3C7",
      text_color: "#78350F"
    };

    let currentNumber = 1;
    let score = 0;
    let streak = 0;
    let answered = false;
    let timerInterval = null;
    let timeLeft = 15;
    let questionCount = 0;
    const MAX_QUESTIONS = 10;
    const numberWords = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten'];

    function isDesktop() { return window.innerWidth >= 1024; }

    function generateHandSVG(fingers, isLeft = false) {
      const width = 120;
      const height = 150;
      const fingerConfigs = {
        1: [false, true, false, false, false],
        2: [false, true, true, false, false],
        3: [false, true, true, true, false],
        4: [false, true, true, true, true],
        5: [true, true, true, true, true],
      };
      const config = fingerConfigs[fingers] || [false, false, false, false, false];
      const transform = isLeft ? `transform="scale(-1, 1) translate(-${width}, 0)"` : '';
      
      return `
        <svg width="${width}" height="${height}" viewBox="0 0 140 180" ${transform}>
          <ellipse cx="70" cy="130" rx="50" ry="40" fill="#FDE68A" stroke="#78350F" stroke-width="3"/>
          <rect x
